{"version":3,"sources":["webpack:///./src/components/workspace/WorkspaceUsers.vue?61f8","webpack:///./src/components/workspace/WorkspaceEditor.vue?8a34","webpack:///./src/components/workspace/WorkspaceEditor.vue?9c01","webpack:///./src/components/workspace/WorkspaceEditor.vue?5270","webpack:///./src/components/workspace/WorkspaceEditor.vue","webpack:///./node_modules/core-js/modules/es.function.name.js","webpack:///./src/components/workspace/WorkspaceSettings.vue?bcd7","webpack:///./src/components/workspace/WorkspaceUsers.vue?5dc0","webpack:///./src/components/workspace/WorkspaceUsers.vue?1e40","webpack:///./src/components/workspace/WorkspaceUsers.vue?5a8f","webpack:///./src/components/workspace/WorkspaceUsers.vue","webpack:///./src/components/workspace/WorkspaceSettings.vue?a4c8","webpack:///./src/components/workspace/WorkspaceSettings.vue?5b84","webpack:///./src/components/workspace/WorkspaceSettings.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","on","$event","preventDefault","submit","staticClass","_v","directives","name","rawName","value","form","expression","attrs","disabled","domProps","target","composing","$set","$$selectedVal","Array","prototype","filter","call","options","o","selected","map","val","_value","multiple","canSubmit","deleteWorkspace","_e","staticRenderFns","props","editMode","type","Boolean","setup","root","emit","workspace","getters","public","submitting","deep","user","userId","id","update","result","create","mutations","setWorkspace","data","$toasted","success","error","message","confirm","del","$router","push","component","DESCRIPTORS","defineProperty","f","FunctionPrototype","Function","FunctionPrototypeToString","toString","nameRE","NAME","configurable","get","match","_m","_l","key","_s","currentUser","removeUser","username","addUser","workspaceId","reloadWorkspace","components","WorkspaceEditor","WorkspaceUsers"],"mappings":"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","file":"js/workspaceSettings.0443acc0.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WorkspaceUsers.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WorkspaceUsers.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.submit($event)}}},[_c('div',{staticClass:\"field\"},[_c('div',{staticClass:\"label\"},[_vm._v(\" Name \")]),_c('div',{staticClass:\"control\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.name),expression:\"form.name\"}],staticClass:\"input\",attrs:{\"type\":\"text\",\"placeholder\":\"Workspace Name\",\"disabled\":_vm.disabled},domProps:{\"value\":(_vm.form.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.form, \"name\", $event.target.value)}}})])]),_c('div',{staticClass:\"field\"},[_c('div',{staticClass:\"control\"},[_c('div',{staticClass:\"select\"},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.public),expression:\"form.public\"}],attrs:{\"disabled\":_vm.disabled},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.form, \"public\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},[_c('option',{domProps:{\"value\":false}},[_vm._v(\"Private\")]),_c('option',{domProps:{\"value\":true}},[_vm._v(\"Public\")])])])])]),_c('div',{staticClass:\"level vertical-pad-m has-text-centered\"},[_c('div',{staticClass:\"level-left\"},[_c('button',{staticClass:\"button is-primary\",attrs:{\"type\":\"submit\",\"disabled\":_vm.disabled || !_vm.canSubmit}},[_vm._v(\" Save \")])]),_c('div',{staticClass:\"level-right\"},[(_vm.editMode)?_c('button',{staticClass:\"button is-danger\",attrs:{\"disabled\":_vm.disabled,\"type\":\"button\"},on:{\"click\":_vm.deleteWorkspace}},[_vm._v(\" Delete Workspace \")]):_vm._e()])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport {\r\n  defineComponent,\r\n  reactive,\r\n  computed,\r\n  watch,\r\n  ref\r\n} from \"@vue/composition-api\";\r\nimport { workspaceService } from \"@/services/dataService\";\r\nimport { workspaceStore, userStore } from \"@/store\";\r\nimport { Workspace, User } from \"@/types\";\r\n\r\nexport default defineComponent({\r\n  name: \"WorkspaceEditor\",\r\n  props: {\r\n    editMode: {\r\n      type: Boolean as () => boolean\r\n    }\r\n  },\r\n\r\n  setup(props, { root, emit }) {\r\n    const workspace = computed<Workspace>(workspaceStore.getters.workspace);\r\n    const form = reactive({\r\n      name: \"\",\r\n      public: false\r\n    });\r\n    const submitting = ref<boolean>(false);\r\n    const canSubmit = computed<boolean>(() => {\r\n      return (\r\n        !!form.name && typeof form.public === \"boolean\" && !submitting.value\r\n      );\r\n    });\r\n    // watch since component loads before store can load the workspace\r\n    if (props.editMode) {\r\n      watch(\r\n        workspaceStore.getters.workspace,\r\n        val => {\r\n          form.name = val.name;\r\n          form.public = val.public;\r\n        },\r\n        {\r\n          deep: true\r\n        }\r\n      );\r\n    }\r\n\r\n    const user = computed<User>(userStore.getters.user);\r\n    const disabled = computed<boolean | undefined>(() => {\r\n      return props.editMode && workspace.value.userId !== user.value.id;\r\n    });\r\n\r\n    const submit = async () => {\r\n      submitting.value = true;\r\n\r\n      let result;\r\n      if (props.editMode)\r\n        result = await workspaceService.update(workspace.value.id, form);\r\n      else result = await workspaceService.create(form);\r\n\r\n      submitting.value = false;\r\n\r\n      if (\"success\" in result) {\r\n        if (props.editMode) {\r\n          // reload workspace in store\r\n          workspaceStore.mutations.setWorkspace(result.data);\r\n          root.$toasted.success(\"Saved!\");\r\n        } else emit(\"workspace-created\", result.data);\r\n      } else {\r\n        root.$toasted.error(\"Error saving workspace: \" + result.message);\r\n      }\r\n    };\r\n\r\n    const deleteWorkspace = async () => {\r\n      if (confirm(\"Are you sure you want to delete this workspace?\")) {\r\n        const result = await workspaceService.del(workspace.value.id);\r\n        if (\"success\" in result) {\r\n          root.$toasted.success(\"Workspace deleted\");\r\n          root.$router.push(\"/\");\r\n        } else {\r\n          root.$toasted.error(\"Error deleting workspace: \" + result.message);\r\n        }\r\n      }\r\n    };\r\n\r\n    return {\r\n      form,\r\n      submit,\r\n      canSubmit,\r\n      disabled,\r\n      deleteWorkspace\r\n    };\r\n  }\r\n});\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WorkspaceEditor.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WorkspaceEditor.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./WorkspaceEditor.vue?vue&type=template&id=590a21a6&\"\nimport script from \"./WorkspaceEditor.vue?vue&type=script&lang=ts&\"\nexport * from \"./WorkspaceEditor.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var DESCRIPTORS = require('../internals/descriptors');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.github.io/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !(NAME in FunctionPrototype)) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"form fixed-column wide-container vertical-pad\"},[_c('workspace-editor',{attrs:{\"editMode\":true}}),_c('workspace-users')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._m(0),(_vm.workspace.sharedUsers)?_c('div',_vm._l((_vm.workspace.sharedUsers),function(user){return _c('div',{key:user.id,staticClass:\"shared-user level is-mobile\"},[_c('div',{staticClass:\"level-left\"},[_c('div',{staticClass:\"level-item\"},[_vm._v(_vm._s(user.name))])]),_c('div',{staticClass:\"level-right\"},[_c('button',{staticClass:\"button is-small is-outlined is-danger\",attrs:{\"disabled\":_vm.disabled && _vm.currentUser.name !== user.name},on:{\"click\":function($event){return _vm.removeUser(user.name)}}},[(_vm.currentUser.name === user.name)?[_vm._v(\" Leave \")]:[_vm._v(\" Remove \")]],2)])])}),0):_vm._e(),_c('div',{staticClass:\"field has-addons\"},[_c('div',{staticClass:\"control\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.username),expression:\"username\"}],staticClass:\"input\",attrs:{\"type\":\"text\",\"placeholder\":\"Username\",\"disabled\":_vm.disabled},domProps:{\"value\":(_vm.username)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.username=$event.target.value}}})]),_c('div',{staticClass:\"control\"},[_c('button',{staticClass:\"button is-primary\",attrs:{\"disabled\":_vm.disabled},on:{\"click\":_vm.addUser}},[_vm._v(\" Add \")])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"field\"},[_c('div',{staticClass:\"label\"},[_vm._v(\" Collaborators \")])])}]\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { defineComponent, ref, computed } from \"@vue/composition-api\";\r\nimport { Workspace, User } from \"@/types\";\r\nimport { workspaceStore, userStore } from \"@/store\";\r\nimport { workspaceService } from \"@/services/dataService\";\r\n\r\nexport default defineComponent({\r\n  name: \"WorkspaceUsers\",\r\n\r\n  setup(props, { root, emit }) {\r\n    const username = ref<string>(\"\");\r\n    const workspace = computed<Workspace>(workspaceStore.getters.workspace);\r\n    const user = computed<User>(userStore.getters.user);\r\n\r\n    const addUser = async () => {\r\n      const result = await workspaceService.addUser({\r\n        workspaceId: workspace.value.id,\r\n        username: username.value\r\n      });\r\n      if (\"success\" in result) {\r\n        // reload workspace in store\r\n        workspaceStore.mutations.reloadWorkspace();\r\n\r\n        root.$toasted.success(\"User added\");\r\n        emit(\"workspace-user-added\", result.data);\r\n      } else {\r\n        root.$toasted.error(\"Error adding user: \" + result.message);\r\n      }\r\n    };\r\n\r\n    const removeUser = async (username: string) => {\r\n      const message =\r\n        username === user.value.name\r\n          ? \"Are you sure you want to leave this workspace?\"\r\n          : \"Are you sure you want to remove this user from the workspace\";\r\n\r\n      if (confirm(message)) {\r\n        const result = await workspaceService.removeUser({\r\n          workspaceId: workspace.value.id,\r\n          username\r\n        });\r\n        if (\"success\" in result) {\r\n          // reload workspace in store\r\n          workspaceStore.mutations.reloadWorkspace();\r\n          emit(\"workspace-user-removed\", result.data);\r\n          root.$toasted.success(\"User removed from workspace\");\r\n          // redirect if user removed themselves\r\n          if (username === user.value.name) {\r\n            root.$router.push(\"/\");\r\n          }\r\n        } else {\r\n          root.$toasted.error(\"Error removing user: \" + result.message);\r\n        }\r\n      }\r\n    };\r\n\r\n    const disabled = computed<boolean>(() => {\r\n      return workspace.value.userId !== user.value.id;\r\n    });\r\n\r\n    return {\r\n      workspace,\r\n      username,\r\n      addUser,\r\n      removeUser,\r\n      disabled,\r\n      currentUser: user\r\n    };\r\n  }\r\n});\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WorkspaceUsers.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WorkspaceUsers.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./WorkspaceUsers.vue?vue&type=template&id=4983a3c4&\"\nimport script from \"./WorkspaceUsers.vue?vue&type=script&lang=ts&\"\nexport * from \"./WorkspaceUsers.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./WorkspaceUsers.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\r\nimport { defineComponent } from \"@vue/composition-api\";\r\nimport WorkspaceEditor from \"@/components/workspace/WorkspaceEditor.vue\";\r\nimport WorkspaceUsers from \"@/components/workspace/WorkspaceUsers.vue\";\r\n\r\nexport default defineComponent({\r\n  name: \"WorkspaceSettings\",\r\n  components: {\r\n    WorkspaceEditor,\r\n    WorkspaceUsers\r\n  }\r\n});\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WorkspaceSettings.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WorkspaceSettings.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./WorkspaceSettings.vue?vue&type=template&id=4eab6548&\"\nimport script from \"./WorkspaceSettings.vue?vue&type=script&lang=ts&\"\nexport * from \"./WorkspaceSettings.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}