(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["workspaceSettings"],{"17d1":function(e,t,a){"use strict";var r=a("ac2d"),s=a.n(r);s.a},6683:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",{on:{submit:function(t){return t.preventDefault(),e.submit(t)}}},[a("div",{staticClass:"field"},[a("div",{staticClass:"label"},[e._v(" Name ")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.name,expression:"form.name"}],staticClass:"input",attrs:{type:"text",placeholder:"Workspace Name",disabled:e.disabled},domProps:{value:e.form.name},on:{input:function(t){t.target.composing||e.$set(e.form,"name",t.target.value)}}})])]),a("div",{staticClass:"field"},[a("div",{staticClass:"control"},[a("div",{staticClass:"select"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.form.public,expression:"form.public"}],attrs:{disabled:e.disabled},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.form,"public",t.target.multiple?a:a[0])}}},[a("option",{domProps:{value:!1}},[e._v("Private")]),a("option",{domProps:{value:!0}},[e._v("Public")])])])])]),a("div",{staticClass:"level vertical-pad-m has-text-centered"},[a("div",{staticClass:"level-left"},[a("button",{staticClass:"button is-primary",attrs:{type:"submit",disabled:e.disabled||!e.canSubmit}},[e._v(" Save ")])]),a("div",{staticClass:"level-right"},[e.editMode?a("button",{staticClass:"button is-danger",attrs:{disabled:e.disabled,type:"button"},on:{click:e.deleteWorkspace}},[e._v(" Delete Workspace ")]):e._e()])])])},s=[],n=(a("b0c0"),a("96cf"),a("1da1")),i=a("750b"),o=a("a21c"),c=a("0613"),u=Object(i["c"])({name:"WorkspaceEditor",props:{editMode:{type:Boolean}},setup:function(e,t){var a=t.root,r=t.emit,s=Object(i["a"])(c["b"].getters.workspace),u=Object(i["e"])({name:"",public:!1}),l=Object(i["f"])(!1),d=Object(i["a"])((function(){return!!u.name&&"boolean"===typeof u.public&&!l.value}));e.editMode&&Object(i["g"])(c["b"].getters.workspace,(function(e){u.name=e.name,u.public=e.public}),{deep:!0});var p=Object(i["a"])(c["a"].getters.user),m=Object(i["a"])((function(){return e.editMode&&s.value.userId!==p.value.id})),v=function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(l.value=!0,!e.editMode){t.next=7;break}return t.next=4,o["f"].update(s.value.id,u);case 4:n=t.sent,t.next=10;break;case 7:return t.next=9,o["f"].create(u);case 9:n=t.sent;case 10:l.value=!1,"success"in n?e.editMode?(c["b"].mutations.setWorkspace(n.data),a.$toasted.success("Saved!")):r("workspace-created",n.data):a.$toasted.error("Error saving workspace: "+n.message);case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),f=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!confirm("Are you sure you want to delete this workspace?")){e.next=5;break}return e.next=3,o["f"].del(s.value.id);case 3:t=e.sent,"success"in t?(a.$toasted.success("Workspace deleted"),a.$router.push("/")):a.$toasted.error("Error deleting workspace: "+t.message);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{form:u,submit:v,canSubmit:d,disabled:m,deleteWorkspace:f}}}),l=u,d=a("2877"),p=Object(d["a"])(l,r,s,!1,null,null,null);t["a"]=p.exports},ac2d:function(e,t,a){},b0c0:function(e,t,a){var r=a("83ab"),s=a("9bf2").f,n=Function.prototype,i=n.toString,o=/^\s*function ([^ (]*)/,c="name";r&&!(c in n)&&s(n,c,{configurable:!0,get:function(){try{return i.call(this).match(o)[1]}catch(e){return""}}})},eaf1:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"form fixed-column wide-container vertical-pad"},[a("workspace-editor",{attrs:{editMode:!0}}),a("workspace-users")],1)},s=[],n=a("750b"),i=a("6683"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._m(0),e.workspace.sharedUsers?a("div",e._l(e.workspace.sharedUsers,(function(t){return a("div",{key:t.id,staticClass:"shared-user level is-mobile"},[a("div",{staticClass:"level-left"},[a("div",{staticClass:"level-item"},[e._v(e._s(t.name))])]),a("div",{staticClass:"level-right"},[a("button",{staticClass:"button is-small is-outlined is-danger",attrs:{disabled:e.disabled&&e.currentUser.name!==t.name},on:{click:function(a){return e.removeUser(t.name)}}},[e.currentUser.name===t.name?[e._v(" Leave ")]:[e._v(" Remove ")]],2)])])})),0):e._e(),a("div",{staticClass:"field has-addons"},[a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"input",attrs:{type:"text",placeholder:"Username",disabled:e.disabled},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}})]),a("div",{staticClass:"control"},[a("button",{staticClass:"button is-primary",attrs:{disabled:e.disabled},on:{click:e.addUser}},[e._v(" Add ")])])])])},c=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"field"},[a("div",{staticClass:"label"},[e._v(" Collaborators ")])])}],u=(a("b0c0"),a("96cf"),a("1da1")),l=a("0613"),d=a("a21c"),p=Object(n["c"])({name:"WorkspaceUsers",setup:function(e,t){var a=t.root,r=t.emit,s=Object(n["f"])(""),i=Object(n["a"])(l["b"].getters.workspace),o=Object(n["a"])(l["a"].getters.user),c=function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d["f"].addUser({workspaceId:i.value.id,username:s.value});case 2:t=e.sent,"success"in t?(l["b"].mutations.reloadWorkspace(),a.$toasted.success("User added"),r("workspace-user-added",t.data)):a.$toasted.error("Error adding user: "+t.message);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t){var s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=t===o.value.name?"Are you sure you want to leave this workspace?":"Are you sure you want to remove this user from the workspace",!confirm(s)){e.next=6;break}return e.next=4,d["f"].removeUser({workspaceId:i.value.id,username:t});case 4:n=e.sent,"success"in n?(l["b"].mutations.reloadWorkspace(),r("workspace-user-removed",n.data),a.$toasted.success("User removed from workspace"),t===o.value.name&&a.$router.push("/")):a.$toasted.error("Error removing user: "+n.message);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=Object(n["a"])((function(){return i.value.userId!==o.value.id}));return{workspace:i,username:s,addUser:c,removeUser:p,disabled:m,currentUser:o}}}),m=p,v=(a("17d1"),a("2877")),f=Object(v["a"])(m,o,c,!1,null,null,null),b=f.exports,k=Object(n["c"])({name:"WorkspaceSettings",components:{WorkspaceEditor:i["a"],WorkspaceUsers:b}}),w=k,g=Object(v["a"])(w,r,s,!1,null,null,null);t["default"]=g.exports}}]);
//# sourceMappingURL=workspaceSettings.0443acc0.js.map